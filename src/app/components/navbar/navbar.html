@if (ui.visible()) {
<nav class="fixed top-0 left-0 w-full h-16 bg-[#F2D2A9] text-black backdrop-blur-md border-b z-[100] px-6 flex items-center justify-between">
  <div class="flex items-center h-full gap-8">
  <a routerLink="/" class="flex items-center text-2xl font-black tracking-tighter">
    <img src="/yoliknavbar.png" alt="YOLIK Logo" class="h-12 w-auto mr-2" />
  </a>
    <div class="hidden md:flex h-full gap-2">
      @for (item of ui.menuItems; track item.id) {
        @if (item.visible()) {
          <a [routerLink]="item.path"
             routerLinkActive="border-b-4 border-[#D11C5E] text-[#D11C5E] font-black"
             [routerLinkActiveOptions]="{exact: item.exact || false}"
             class="h-full flex items-center px-4 text-xs font-bold uppercase tracking-widest hover:text-[#D11C5E] transition-all">
             {{ item.label }}
          </a>
        }
      }
    </div>
  </div>

  <div class="flex items-center gap-6">
    @if (ui.searchVisible()) {
      <div class="hidden lg:block relative">
        <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-[10px]"></i>
        <input type="text" placeholder="BUSCAR..." class="pl-9 pr-4 py-2 bg-gray-100 rounded-none text-[10px] tracking-widest focus:outline-none w-44 focus:w-60 transition-all border-b border-transparent focus:border-[#D11C5E]" />
      </div>
    }

    <div class="flex items-center gap-4">
      @if (!ui.isLoggedIn()) {
        <div class="flex items-center gap-3">
          <a routerLink="/login" routerLinkActive="text-[#D11C5E]" class="text-[10px] font-bold uppercase tracking-widest hover:text-[#D11C5E] transition-colors">Login</a>
          <span class="text-gray-300">|</span>
          <a routerLink="/registro" routerLinkActive="text-[#D11C5E]" class="text-[10px] font-bold uppercase tracking-widest hover:text-[#D11C5E] transition-colors">Registro</a>
        </div>
      } @else {
        <div class="flex items-center gap-4">
          @if (ui.cartVisible()) {
            <button (click)="toggleCart()" class="relative cursor-pointer px-2 hover:text-[#D11C5E] transition-colors">
              <i class="fa-solid fa-bag-shopping text-xl"></i>
              @if (cartItemCount > 0) {
                <span class="absolute -top-1 -right-1 bg-[#D11C5E] text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center">
                  {{ cartItemCount }}
                </span>
              }
            </button>
          }
          @if (ui.profileVisible()) {
            <div class="flex items-center gap-2 cursor-pointer group">
              <span class="text-[10px] font-bold uppercase tracking-widest group-hover:text-[#D11C5E]">{{ ui.userName() }}</span>
              <i class="fa-regular fa-user text-xl"></i>
            </div>
          }
        </div>
      }
    </div>
  </div>
</nav>

<!-- CARRITO LATERAL -->
<div
  [class.translate-x-0]="isCartOpen"
  [class.translate-x-full]="!isCartOpen"
  class="fixed top-16 right-0 w-full md:w-96 h-[calc(100vh-4rem)] bg-white shadow-2xl z-[99] transition-transform duration-300 ease-in-out flex flex-col">

  <!-- Header del carrito -->
  <div class="bg-[#D11C5E] text-white px-6 py-4 flex items-center justify-between">
    <h3 class="text-lg font-black uppercase tracking-wide">Mi Carrito</h3>
    <button (click)="toggleCart()" class="hover:text-gray-200 transition-colors">
      <i class="fa-solid fa-xmark text-2xl"></i>
    </button>
  </div>

  <!-- Items del carrito -->
  <div class="flex-1 overflow-y-auto px-6 py-4">
    @if (cartItems.length === 0) {
      <div class="flex flex-col items-center justify-center h-full text-gray-400">
        <i class="fa-solid fa-bag-shopping text-6xl mb-4"></i>
        <p class="text-sm font-medium">Tu carrito está vacío</p>
        <p class="text-xs mt-2">¡Agrega productos de la tienda!</p>
      </div>
    } @else {
      <div class="space-y-4">
        @for (item of cartItems; track item.id) {
          <div class="flex gap-4 bg-gray-50 rounded-lg p-3 hover:bg-gray-100 transition-colors">
            <!-- Imagen del producto -->
            <div class="w-20 h-20 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0">
              <img [src]="item.image" [alt]="item.name" class="w-full h-full object-cover">
            </div>

            <!-- Info del producto -->
            <div class="flex-1 min-w-0">
              <h4 class="font-bold text-sm truncate text-[#D11C5E]">{{ item.name }}</h4>
              <p class="text-xs text-gray-500 mt-1">{{ item.description }}</p>

              <!-- Cantidad y precio -->
              <div class="flex items-center justify-between mt-2">
                <div class="flex items-center gap-2">
                  <button (click)="updateQuantity(item.id, item.quantity - 1)"
                          class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors">
                    <i class="fa-solid fa-minus text-[10px] text-gray-700"></i>
                  </button>
                  <span class="text-sm font-bold w-6 text-center text-[#D11C5E]">{{ item.quantity }}</span>
                  <button (click)="updateQuantity(item.id, item.quantity + 1)"
                          class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors">
                    <i class="fa-solid fa-plus text-[10px] text-gray-700"></i>
                  </button>
                </div>

                <div class="flex items-center gap-2">
                  <span class="text-sm font-black text-[#D11C5E]">${{ item.price * item.quantity }}</span>
                  <button (click)="removeItem(item.id)"
                          class="text-gray-400 hover:text-red-500 transition-colors">
                    <i class="fa-solid fa-trash text-xs"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>

  <!-- Footer del carrito (Total y botones) -->
  @if (cartItems.length > 0) {
    <div class="border-t border-gray-200 px-6 py-4 bg-gray-50">
      <!-- Subtotal -->
      <div class="flex items-center justify-between mb-4">
        <span class="text-sm font-medium text-gray-600">Subtotal:</span>
        <span class="text-xl font-black text-black">${{ cartTotal }}</span>
      </div>

      <!-- Botones -->
      <div class="space-y-2">
        <button class="w-full py-3 bg-[#D11C5E] text-white font-bold text-sm uppercase tracking-wide rounded-lg hover:bg-[#b91750] transition-colors">
          Finalizar Compra
        </button>
        <button (click)="toggleCart()" class="w-full py-3 bg-gray-200 text-gray-700 font-bold text-sm uppercase tracking-wide rounded-lg hover:bg-gray-300 transition-colors">
          Seguir Comprando
        </button>
      </div>
    </div>
  }
</div>

<!-- Overlay (fondo oscuro cuando el carrito está abierto) -->
@if (isCartOpen) {
  <div (click)="toggleCart()" class="fixed inset-0 bg-black/50 z-[98] top-16"></div>
}
}
